{"version":3,"file":"pages/my/index.js","mappings":";;;;;;;;;;;;;;;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAGA;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AA4BA;AAAA;AA5BA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAiCA;AAAA;AAjCA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA","sources":["webpack://wx-Fruit/._src_pages_my_index.tsx","webpack://wx-Fruit/./src/pages/my/index.tsx?f47f","webpack://wx-Fruit/._src_pages_my_my.jsx"],"sourcesContent":["import History from \"./my\";\r\nimport \"./index.scss\";\r\n\r\nexport default function Index() {\r\n  return (\r\n    <>\r\n      <History />\r\n    </>\r\n  );\r\n}\r\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/babel-loader/lib/index.js??ruleSet[1].rules[5].use[0]!./index.tsx\"\nvar config = {\"navigationBarTitleText\":\"菜单\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/my/index', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n","import { View } from \"@tarojs/components\";\r\nimport Taro from \"@tarojs/taro\";\r\nimport { useState, useEffect } from \"react\";\r\n// import { dateToString } from '../../utils/utils'\r\nexport default function History() {\r\n  const [res, setRes] = useState();\r\n  // const stamp1 = dateToString(new Date(new Date().setHours(0, 0, 0, 0))) //获取当天零点的时间\r\n  //查看本端口历史单据\r\n  function history() {\r\n    Taro.navigateTo({ url: \"./history/index\" });\r\n  }\r\n  //查看所有人的商品汇总\r\n  async function orderList() {\r\n    const c1 = new Taro.cloud.Cloud({\r\n      resourceEnv: \"test-taro1-4gdydbsi405487f2\",\r\n    });\r\n    Taro.showLoading({\r\n      title: \"加载中\",\r\n    });\r\n    setTimeout(function () {\r\n      Taro.hideLoading();\r\n    }, 2000);\r\n    Taro.cloud\r\n      .callFunction({\r\n        // 要调用的云函数名称\r\n        name: \"orderList\",\r\n        // 传递给云函数的event参数\r\n      })\r\n      .then((res) => {\r\n        const ResultList = [];\r\n        ResultList.value = res.result.data;\r\n        console.log(res);\r\n        Taro.preload({ ResultList: res.result.data });\r\n        Taro.navigateTo({ url: \"./orderList/index\" });\r\n        console.log(\"已更新\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n  //清空数据库\r\n  async function clearList() {\r\n    //判断权限\r\n    Taro.showModal({\r\n      editable: true,\r\n      placeholderText: \"请输入密码\",\r\n      success: async (res) => {\r\n        if (res.confirm && res.content == 7423674) {\r\n          const c1 = new Taro.cloud.Cloud({\r\n            resourceEnv: \"test-taro1-4gdydbsi405487f2\",\r\n          });\r\n          const db = Taro.cloud.database({});\r\n          await db\r\n            .collection(\"orderList\")\r\n            .where({\r\n              all: null,\r\n            })\r\n            .remove();\r\n          Taro.showToast({\r\n            title: \"删除成功\",\r\n            icon: \"success\",\r\n            duration: 1000,\r\n          });\r\n        } else if (res.cancel) {\r\n          console.log(\"用户取消\");\r\n        } else {\r\n          Taro.showToast({\r\n            title: \"密码错误\",\r\n            icon: \"error\",\r\n          });\r\n        }\r\n      },\r\n    });\r\n  }\r\n  //更新商品列表\r\n  function upDate() {\r\n    //判断权限\r\n    Taro.showModal({\r\n      editable: true,\r\n      placeholderText: \"请输入密码\",\r\n      success: async (res) => {\r\n        if (res.confirm && res.content == 1) {\r\n          Taro.navigateTo({\r\n            url: \"./upDate/index\",\r\n          });\r\n        } else if (res.cancel) {\r\n          console.log(\"用户取消\");\r\n        } else {\r\n          Taro.showToast({\r\n            title: \"密码错误\",\r\n            icon: \"error\",\r\n          });\r\n        }\r\n      },\r\n    });\r\n  }\r\n  return (\r\n    <>\r\n      <View className=\"history1\">\r\n        <text onClick={() => history()}>我的订单</text>\r\n      </View>\r\n      <View className=\"history1\">\r\n        <text onClick={() => orderList()}>拼团汇总</text>\r\n      </View>\r\n\r\n      <View className=\"history\">\r\n        <text onClick={() => upDate()}>更新商品</text>\r\n      </View>\r\n      <View className=\"history\">\r\n        <text onClick={() => clearList()}>删库</text>\r\n      </View>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"sourceRoot":""}